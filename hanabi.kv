#:kivy 1.11.1

# <Widget>:
#     canvas.after:
#         Line:
#             rectangle: self.x+1,self.y+1,self.width-1,self.height-1

<GameInfo>:
    lives: lives
    hints: hints
    cards_left: cards_left

    orientation: 'horizontal'
    size_hint: 1, 0.05

    Label:
        id: lives
        text: 'Lives: ?'

    Label:
        id: hints
        text: 'Hints: ?'

    Label:
        id: cards_left
        text: 'Cards left: ?'


<GameButtons>:
    play_toggle: play_toggle
    discard_toggle: discard_toggle
    hint_rank_toggle: hint_rank_toggle
    hint_suit_toggle: hint_suit_toggle
    next_turn_button: next_turn_button

    cols: 5
    spacing: dp(10)
    padding: [dp(10), dp(0), dp(10), dp(0)]
    size_hint_y: None
    height: dp(50)

    ToggleButton:
        id: play_toggle
        text: 'Play a card'
        size_hint_y: None
        height: dp(40)

    ToggleButton:
        id: discard_toggle
        text: 'Discard a card'
        size_hint_y: None
        height: dp(40)

    ToggleButton:
        id: hint_rank_toggle
        text: 'Hint rank'
        size_hint_y: None
        height: dp(40)

    ToggleButton:
        id: hint_suit_toggle
        text: 'Hint suit'
        size_hint_y: None
        height: dp(40)

    Button:
        id: next_turn_button
        text: 'Next turn'
        size_hint_y: None
        height: dp(40)


<Hand>:
    orientation: 'vertical'
    padding: [dp(10), dp(10), dp(10), dp(10)]
    spacing: 5
    size_hint: 1, 1

    canvas:
        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1


<PlayerGrid>:
    orientation: 'vertical'
    size_hint: 0.6, 1

    canvas:
        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1


<Players>:
    padding: [dp(10), dp(0), dp(10), dp(10)]
    spacing: dp(10)
    cols: 3


<LastCard>:
    padding: [dp(10), dp(20), dp(0), dp(10)]
    size_hint: 0.35, 1


<Human>:
    padding: [dp(10), dp(20), dp(10), dp(10)]


<Board>:
    padding: [dp(0), dp(20), dp(10), dp(10)]


<EndGamePopup>:
    score_label: score_label
    quit_button: quit_button
    return_button: return_button

    title: ''
    separator_height: dp(0)
    size: dp(400), dp(200)
    size_hint: None, None

    BoxLayout:
        orientation: 'vertical'

        Label:
            text: 'Game over!'

        BoxLayout:
            padding: [dp(0), dp(0), dp(0), dp(20)]
            Label:
                id: score_label
                text: 'Final score: n/a'

        BoxLayout:
            padding: [dp(20), dp(10), dp(20), dp(20)]
            spacing: dp(20)

            Button:
                id: quit_button
                text: 'Quit'
                height: self.texture_size[1]*2
                size_hint_y: None
            Button:
                id: return_button
                text: 'Return to game'
                height: self.texture_size[1]*2
                size_hint_y: None

<HanabiGame>:
    players: players
    last_card: last_card
    human: human
    board: board
    game_info: game_info
    game_buttons: game_buttons
    top_grid: top_grid

    size: root.size
    orientation: 'vertical'
    padding: [dp(0), dp(20), dp(0), dp(0)]

    canvas:
        Color:
            rgb: 30/255, 77/255, 3/255
        Rectangle:
            size: self.size

    GameInfo:
        id: game_info

    GridLayout:
        id: top_grid
        cols: 3

        LastCard:
            id: last_card

        Human:
            id: human

        Board:
            id: board

    GameButtons:
        id: game_buttons

    Players:
        id: players
